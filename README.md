# Gasker Content Refresher

一個專業的 WordPress 插件,通過 AI 自動化翻新舊文章,提升內容新鮮度以優化 SEO 排名。

## 功能特色

- ✅ **自動排程**: 每日自動處理最舊的文章
- ✅ **AI 驅動**: 支援 OpenAI GPT-4o / GPT-4o-mini / Gemini 1.5 Pro
- ✅ **安全模式**: 內建待審閱模式,確保內容質量
- ✅ **HTML 保護**: 自動驗證 HTML 結構完整性
- ✅ **靈活配置**: 可自訂處理數量、冷卻期、排除規則
- ✅ **詳細日誌**: 完整記錄每次執行狀態
- ✅ **Email 通知**: 每日執行摘要自動發送

## 系統需求

- WordPress 6.0 或更高版本
- PHP 7.4 或更高版本
- AI Engine 插件 (必須)

## 安裝步驟

### 1. 安裝 AI Engine 插件

Gasker Content Refresher 依賴 **AI Engine by Jordy Meow** 來處理 AI 請求。

1. 前往 WordPress 後台 → 插件 → 安裝插件
2. 搜尋 "AI Engine"
3. 安裝並啟用
4. 前往 AI Engine 設定頁面配置你的 API Key (OpenAI 或 Gemini)

### 2. 安裝 Gasker Content Refresher

#### 方式 A: 上傳安裝

1. 下載插件 ZIP 檔案
2. 前往 WordPress 後台 → 插件 → 安裝插件 → 上傳插件
3. 選擇 ZIP 檔案並安裝
4. 啟用插件

#### 方式 B: FTP 安裝

1. 解壓縮插件檔案
2. 將 `gasker-content-refresher` 資料夾上傳至 `/wp-content/plugins/`
3. 前往 WordPress 後台 → 插件
4. 啟用 "Gasker Content Refresher"

## 使用方式

### 初次設定

1. 前往 **設定 → Content Refresher**
2. 配置以下參數:
   - **每日處理篇數**: 建議 5-10 篇
   - **冷卻天數**: 建議 30 天
   - **AI 模型**: 推薦 GPT-4o (品質最佳)
   - **審核模式**: 初次使用請選擇「待審閱」
3. 儲存設定

### 測試運行

1. 點擊「立即執行一次」按鈕
2. 查看執行日誌確認結果
3. 前往文章列表檢查「待審閱」的文章
4. 確認改寫質量滿意後發布

### 日常使用

- 插件會每日自動執行
- 定期查看日誌確認執行狀態
- 如果啟用待審閱模式,需手動發布改寫後的文章

## 配置選項說明

### 基本設定

| 選項 | 說明 | 建議值 |
|------|------|--------|
| 每日處理篇數 | 每天自動改寫的文章數量 | 5-10 篇 |
| 冷卻天數 | 只處理 N 天前未更新過的文章 | 30 天 |
| 最大文章長度 | 超過此字數的文章將被跳過 | 5000 字 |

### AI 模型設定

- **GPT-4o**: 最佳質量,推薦使用
- **GPT-4o Mini**: 經濟型,成本較低
- **Gemini 1.5 Pro**: Google 模型,速度快

### 發布模式

- **待審閱模式** (推薦): 改寫後設為待審狀態,需手動審核後發布
- **自動發布模式**: 直接更新已發布文章,適合測試穩定後使用

### 排除設定

- **排除分類**: 選擇不應被自動改寫的分類 (例如:公司簡介、隱私條款)
- **排除文章 ID**: 手動輸入不應被改寫的文章 ID,用逗號分隔

## 工作原理

### 1. 文章篩選

系統會根據以下條件篩選文章:
- 已發布狀態 (`publish`)
- 按最後修改時間排序 (最舊優先)
- 排除冷卻期內剛更新過的文章
- 排除指定分類和文章 ID

### 2. AI 改寫

- 將文章內容發送至 AI Engine
- 使用精心設計的 Prompt 確保:
  - 保留所有 HTML 標籤結構
  - 保留圖片和連結
  - 使用現代化語氣
  - 修正過時資訊
  - 不新增未經證實的內容

### 3. 安全驗證

在更新前會進行多重檢查:
- 內容長度檢查 (不可少於原文的 50%)
- 圖片數量檢查 (不可少於原文)
- HTML 標籤平衡檢查
- 空白內容檢查

### 4. 更新文章

- 根據設定決定發布狀態
- 更新 `post_modified` 時間 (SEO 關鍵)
- 記錄改寫時間到自訂欄位

## 安全性與最佳實踐

### 🔒 安全機制

- **HTML 結構保護**: 自動驗證標籤完整性
- **內容長度驗證**: 防止內容被大幅刪減
- **圖片保護**: 確保圖片不會遺失
- **失敗回滾**: 驗證失敗時不會更新文章

### 💡 最佳實踐

1. **初期測試**: 前 1-2 週使用「待審閱」模式,人工檢查品質
2. **分批處理**: 每日 5-10 篇,避免 Token 消耗過大
3. **定期檢查**: 每週查看執行日誌,確認無異常
4. **排除重要頁面**: 公司簡介、法律條款等不應被自動改寫
5. **備份資料**: 定期備份資料庫,以防萬一

### ⚠️ 注意事項

- **Token 成本**: 使用 AI 模型會產生費用,請監控 API 使用量
- **人工審查**: 技術類文章建議人工審查,避免產生錯誤資訊
- **SEO 監控**: 上線後監控 Google Search Console,確認索引狀態
- **不可逆操作**: 一旦發布就會覆蓋原文,建議先備份

## 常見問題

### Q: 需要付費嗎?

A: 插件本身免費,但需要 AI Engine 和 API Key (OpenAI/Gemini),API 使用會產生費用。

### Q: 每月大約需要多少費用?

A: 假設每篇 2000 字,每日 10 篇,使用 GPT-4o,每月約 20-30 USD。使用 GPT-4o-mini 可降低至 5 USD 左右。

### Q: 會不會破壞我的文章?

A: 插件內建多重安全檢查,並提供「待審閱」模式。初期建議人工審查幾天,確認穩定後再啟用自動發布。

### Q: 如何停止自動執行?

A: 停用插件即可,或將「每日處理篇數」設為 0。

### Q: 改寫後 SEO 會變差嗎?

A: 不會。插件會更新 `post_modified` 時間,讓 Google 知道這是新內容。保持關鍵字密度和標題不變。

### Q: 可以改寫多國語言嗎?

A: 可以。在設定中選擇目標語言即可。

### Q: 如果 AI Engine 沒啟用會怎樣?

A: 插件會顯示警告訊息,並且無法執行改寫功能,但不會造成錯誤。

## 技術細節

### 文件結構

```
gasker-content-refresher/
├── gasker-content-refresher.php  # 主插件文件
├── includes/
│   └── admin-page.php             # 後台介面
├── assets/
│   ├── css/
│   │   └── admin.css              # 後台樣式
│   └── js/
│       └── admin.js               # 後台腳本
└── README.md                      # 說明文件
```

### 使用的 WordPress Hooks

- `register_activation_hook`: 插件啟用時設定預設值
- `register_deactivation_hook`: 插件停用時清理排程
- `wp_schedule_event`: 註冊每日排程任務
- `add_action`: 綁定 Cron 任務和 AJAX 處理
- `add_options_page`: 添加設定頁面

### 資料庫選項

- `gcr_settings`: 儲存插件設定
- `gcr_logs`: 儲存執行日誌 (保留最近 50 筆)

### 自訂欄位

- `_gcr_last_rewrite`: 記錄文章最後改寫時間

## 更新日誌

### Version 1.0.0 (2025-01-24)

- ✅ 初始版本發布
- ✅ 支援每日自動改寫
- ✅ 整合 AI Engine
- ✅ 待審閱/自動發布雙模式
- ✅ 完整的安全驗證機制
- ✅ 詳細執行日誌
- ✅ Email 通知功能
- ✅ 排除規則設定

## 授權

GPL v2 or later

## 作者

Gasker Tech - [https://gasker.tech](https://gasker.tech)

## 支援

如有問題或建議,請聯絡技術支援。

---

**注意**: 本插件會修改你的文章內容,使用前請務必備份資料庫!
